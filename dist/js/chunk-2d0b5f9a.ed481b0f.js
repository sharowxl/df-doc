(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5f9a"],{"1ad8":function(a,e,t){"use strict";t.r(e);var n=function(){var a=this;a._self._c;return a._m(0)},s=[function(){var a=this,e=a._self._c;return e("section",{staticClass:"content df-doc"},[e("h2",{attrs:{id:"shi-yong"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shi-yong"}},[a._v("¶")]),a._v(" 使用")]),e("p",[a._v("使用Vue.use后调用install方法将过滤器，工具方法挂载到Vue原型的"),e("code",[a._v("$utils")]),a._v("对象上，可通过"),e("code",[a._v("vm.prototype.$utils")]),a._v("获取，或直接通过import导出的默认对象获取。过滤器可以跟Vue过滤器一样的使用方式。")]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  // main.js\n  import utils from '@df_scope/df-utils'\n  Vue.use(utils)\n\n")])]),e("h2",{attrs:{id:"guo-lu-qi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#guo-lu-qi"}},[a._v("¶")]),a._v(" 过滤器")]),e("h3",{attrs:{id:"gen-ju-zhi-he-shu-ju-yuan-huo-qu-ling-yi-ge-xiang-guan-zhi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gen-ju-zhi-he-shu-ju-yuan-huo-qu-ling-yi-ge-xiang-guan-zhi"}},[a._v("¶")]),a._v(" 根据值和数据源获取另一个相关值")]),e("p",[a._v("filterValueByKey(text, list, key, value) 参数：")]),e("p",[e("code",[a._v("{text}[传入的值]")])]),e("p",[e("code",[a._v("{list}[待过滤的数组]")])]),e("p",[e("code",[a._v("{key}[传入的值对应的key字段]")])]),e("p",[e("code",[a._v("{value}[传入的值对应的value字段]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  const arr = [\n    { key: 1, value: '数量' }\n  ]\n  filterValueByKey(1, arr, 'key', 'value')\n  // 输出：'数量'\n\n")])]),e("h3",{attrs:{id:"ge-shi-hua-ri-qi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ge-shi-hua-ri-qi"}},[a._v("¶")]),a._v(" 格式化日期")]),e("p",[a._v("filterFormatDate(date, format = 'yyyy-MM-DD') 参数：")]),e("p",[e("code",[a._v("{date}[传入的日期值]")])]),e("p",[e("code",[a._v("{format}[格式化方式,默认为'yyyy-MM-DD']")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  filterFormatDate(new Date(), 'yyyy-MM-DD')\n  // 输出：'2021-06-02'\n\n")])]),e("h3",{attrs:{id:"ge-shi-hua-shi-jian"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ge-shi-hua-shi-jian"}},[a._v("¶")]),a._v(" 格式化时间")]),e("p",[a._v("filterDateTime(date, format = 'yyyy-MM-DD HH:mm:ss') 参数：")]),e("p",[e("code",[a._v("{date}[传入的日期值]")])]),e("p",[e("code",[a._v("{format}[格式化方式,默认为'yyyy-MM-DD HH:mm:ss']")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  filterFormatDate(new Date(), 'yyyy-MM-DD HH:mm:ss')\n  // 输出：'2021-06-02 10:40:58'\n\n")])]),e("h3",{attrs:{id:"ge-shi-hua-xiao-shu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ge-shi-hua-xiao-shu"}},[a._v("¶")]),a._v(" 格式化小数")]),e("p",[a._v("filterNumberFloat(num, precision) 参数：")]),e("p",[e("code",[a._v("{num}[传入的数字]")])]),e("p",[e("code",[a._v("{precision}[保留几位小数]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  filterNumberFloat(1, 2)\n  // 输出：'1.00'\n\n")])]),e("h2",{attrs:{id:"gong-yong-fang-fa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gong-yong-fang-fa"}},[a._v("¶")]),a._v(" 公用方法")]),e("h3",{attrs:{id:"huo-qu-yi-zu-sui-ji-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#huo-qu-yi-zu-sui-ji-id"}},[a._v("¶")]),a._v(" 获取一组随机id")]),e("p",[a._v("uuid")]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  uuid()\n\n")])]),e("h3",{attrs:{id:"huo-qu-localhost.searchshang-de-can-shu-fan-hui-can-shu-dui-xiang"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#huo-qu-localhost.searchshang-de-can-shu-fan-hui-can-shu-dui-xiang"}},[a._v("¶")]),a._v(" 获取localhost.search上的参数，返回参数对象")]),e("p",[a._v("getUrlParam")]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  // http://localhost:9000/apps/06/XiaoQiGl?a=1&b=2&c=3\n  getUrlParam()\n  // 输出：{a: '1', b: '2', c: '3'}\n\n")])]),e("h3",{attrs:{id:"huo-qu-localhost.searchshang-de-can-shu-fan-hui-can-shu-dui-xiang-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#huo-qu-localhost.searchshang-de-can-shu-fan-hui-can-shu-dui-xiang-1"}},[a._v("¶")]),a._v(" 获取localhost.search上的参数，返回参数对象")]),e("p",[a._v("getUrlQuery"),e("br"),a._v(" 此方法与 getUrlParam 作用一样，不同的是需要手动传入query字符串 参数：")]),e("p",[e("code",[a._v("{queryStr}[?后的参数]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  const quertStr = 'a=1&b=2&c=3'\n  getUrlQuery(quertStr)\n  // 输出：{a: '1', b: '2', c: '3'}\n\n")])]),e("h3",{attrs:{id:"biao-ge-he-ji-xing-she-zhi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#biao-ge-he-ji-xing-she-zhi"}},[a._v("¶")]),a._v(" 表格合计行设置")]),e("p",[a._v("getSummaries 参数：")]),e("p",[e("code",[a._v("{param} [传入表格默认合计数据]")])]),e("p",[e("code",[a._v("{config}[合计配置]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  // config配置项\n  totalIndex: Number\t// 共计x条文字放置的index位置\n  totalProp: String\t// 共计x条文字放置的字段名位置\n  getTotalText: Function(total)\t// 返回共计x条文字格式的方法, 默认为: `共有${data.length}条记录`,total参数为总条数\n  sumProps: Array\t\t// 需要合计的字段数组\n  sumPropsConfig: Array // 需要合计的字段数组配置\n  sumTextIndex: Number\t// 合计文字放置的index位置\n  sumTextProp: String\t// 合计文字放置的字段名\n  sumText: String\t\t// 合计文字,默认是: '合计：'\n  unit: String\t\t// 合计值的单位\n  precision: Number\t// 小数精确位数，默认到后四位\n\n")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  const config = {\n    totalIndex: 1,\n    getTotalText (num) {\n      return `共计${num}条`\n    },\n    sumProps: ['lingShouJe', 'money', 'people'],\n    sumPropsConfig: [\n      {\n        prop: 'jinJiaJe',\n        precision: 2\n      }\n    ],\n    sumTextProp: 'name',\n    sumText: '合计:',\n    unit: '元'\n  }\n  this.$utils.getSummaries(param, config)\n\n")])]),e("p",[a._v("注：当"),e("code",[a._v("sumPropsConfig")]),a._v("和"),e("code",[a._v("sumProps")]),a._v("同时存在时，优先使用"),e("code",[a._v("sumPropsConfig")]),a._v("配置")]),e("h3",{attrs:{id:"dao-chu-cheng-excel"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dao-chu-cheng-excel"}},[a._v("¶")]),a._v(" 导出成excel")]),e("p",[a._v("export2Excel 参数：")]),e("p",[e("code",[a._v("{headerList}[表头信息]")])]),e("p",[e("code",[a._v("{dataSource}[数据源]")])]),e("p",[e("code",[a._v("{excelTitle}[顶部表名]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  export2Excel(\n    [\n      { title: '药品名称', key: 'yaoPinMc' },\n      { title: '药品规格', key: 'yaoPinGg' },\n      { title: '产地', key: 'chanDi' },\n      { title: '单位', key: 'baoZhuangDw' }\n    ],\n    list,\n    '采购计划完成统计'\n  )\n\n")])]),e("h3",{attrs:{id:"jian-qie-ban-han-shu-jiang-wen-ben-fu-zhi-dao-jian-qie-ban-shang"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jian-qie-ban-han-shu-jiang-wen-ben-fu-zhi-dao-jian-qie-ban-shang"}},[a._v("¶")]),a._v(" 剪切板函数，将文本复制到剪切板上")]),e("p",[a._v("copyText 参数：")]),e("p",[e("code",[a._v("{text}[被复制的文字]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  copyText('复制这一行文字到剪切板')\n\n")])]),e("h3",{attrs:{id:"shu-zi-zhuan-da-xie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shu-zi-zhuan-da-xie"}},[a._v("¶")]),a._v(" 数字转大写")]),e("p",[a._v("ToString 参数：")]),e("p",[e("code",[a._v("{number}[要转换的数字]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  ToString(123.45) // => 壹百贰十叁元肆角伍分\n\n")])]),e("h3",{attrs:{id:"chu-li-jin-e-xiao-shu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chu-li-jin-e-xiao-shu"}},[a._v("¶")]),a._v(" 处理金额小数")]),e("p",[a._v("formatNum"),e("br"),a._v(" 对小数位不满 2 位的, 补充小数位的 0 至两位小数, 对小数位大于 4 位的, 四舍五入保留 4 位小数 参数：")]),e("p",[e("code",[a._v("{number}[要转换的数字]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  formatNum(123) // => 123.00\n  // 123.4 => 123.40\n  // 123.456 => 123.456\n  // 123.4567 => 123.4567\n  // 123.456789 => 123.4568\n\n")])]),e("h3",{attrs:{id:"zi-ding-yi-ge-shi-hua-xiao-shu-wei-shu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zi-ding-yi-ge-shi-hua-xiao-shu-wei-shu"}},[a._v("¶")]),a._v(" 自定义格式化小数位数")]),e("p",[a._v("formatNumDec"),e("br"),a._v(" 这个函数可以理解为 处理金额小数formatNum 的扩展, 在处理小数位数的时候, 支持传入至少保留的小数位数和最多保留的小数位数 参数：")]),e("p",[e("code",[a._v("{number}[要转换的数字]")]),e("br"),e("code",[a._v("{minLength}[至少保留的小数位数]")]),e("br"),e("code",[a._v("{maxLength}[最多保留的小数位数]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  formatNumDec(123, 1, 4) // 至少保留 1 位小数, 最多保留 4 位小数 => 123.0\n  formatNumDec(123.2, 2, 4) // 至少保留 2 位小数, 最多保留 4 位小数 => 123.20\n  formatNumDec(123.456789, 1, 3) // 至少保留 1 位小数, 最多保留 3 位小数 => 123.457\n  formatNumDec(123, 3, 3) // 至少保留 3 位小数, 最多保留 3 位小数 => 123.000\n\n")])]),e("h3",{attrs:{id:"dong-tai-jia-zai-jsjiao-ben"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dong-tai-jia-zai-jsjiao-ben"}},[a._v("¶")]),a._v(" 动态加载JS脚本")]),e("p",[a._v("loadJs 参数：")]),e("p",[e("code",[a._v("{url}[脚本链接]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  loadJs('http://gymk.df-mic.com/heLiKongFei.js')\n    .then(() => { console.log('加载成功') })\n    .catch(e => { console.error(e) })\n\n")])]),e("h2",{attrs:{id:"da-yin-xiang-guan"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#da-yin-xiang-guan"}},[a._v("¶")]),a._v(" 打印相关")]),e("h3",{attrs:{id:"zhi-xing-da-yin-cao-zuo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zhi-xing-da-yin-cao-zuo"}},[a._v("¶")]),a._v(" 执行打印操作")]),e("p",[a._v("webapp_ws_ajax_run")]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  print () {\n    const args = {\n      type: 'preview', // 设置不同的属性可以执行不同的任务，如：preview print pdf xls csv txt rtf img grd\n      report: this.$utils.urlAddRandomNo('/moban/1a.grf'),\n      data: {\n        recordset: [\n          {\n            CustomerID: 'ALFKI',\n            CompanyName: '三川实业有限公司',\n            ContactName: '刘小姐',\n            Address: '大崇明路 50 号',\n            City: '天津',\n            Region: '华北',\n            PostalCode: '343567',\n            Phone: '(030) 30074321'\n          },\n          {\n            CustomerID: 'ANATR',\n            CompanyName: '东南实业',\n            ContactName: '王先生',\n            Address: '承德西路 80 号',\n            City: '天津',\n            Region: '华北',\n            PostalCode: '234575',\n            Phone: '(030) 35554729'\n          }\n        ]\n      },\n      reportid: 'ws_data_from_object' // 这个参数不是必须的，只是用于回发消息标识报表身份\n    }\n    this.$utils.webapp_ws_ajax_run(args)\n  }\n\n")])]),e("h3",{attrs:{id:"da-yin-zhi-zhang-she-zhi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#da-yin-zhi-zhang-she-zhi"}},[a._v("¶")]),a._v(" 打印纸张设置")]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  print () {\n    const args = {\n      type: 'preview', // 设置不同的属性可以执行不同的任务，如：preview print pdf xls csv txt rtf img grd\n      report: report,\n      data: data,\n      // 自定义纸张大小\n      PaperSize: 256,\n      PaperWidth: 21.0,\n      PaperLength: 14.85\n       // 打印方向\n      PaperOrientation: \"landscape\",\n      // 按A4产生的报表，以A5方式打印，实现缩小打印。如果按A3打印，实现放大打印\n      SheetPaperSize: 11, //缩放打印 A3 - 8, A4 - 9, A5 - 11\n      // 打印次数\n      Collate: true,\n      Copies: 3,\n      reportid: 'ws_data_from_object' // 这个参数不是必须的，只是用于回发消息标识报表身份\n    }\n    this.$utils.webapp_ws_ajax_run(args)\n  }\n\n")])]),e("h3",{attrs:{id:"wu-mo-ban-zi-dong-sheng-cheng-mo-ban-da-yin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wu-mo-ban-zi-dong-sheng-cheng-mo-ban-da-yin"}},[a._v("¶")]),a._v(" 无模板自动生成模板打印")]),e("p",[a._v("noReportPrint")]),e("p",[e("code",[a._v("{tableRef}[df-table的ref]")])]),e("p",[e("code",[a._v("{data}[表格数据]")])]),e("p",[e("code",[a._v("{tableName}[报表名]")])]),e("p",[e("code",[a._v("{type}[模式 print 打印 preview 打印预览]")])]),e("p",[e("code",[a._v("{isLandscape}[是否是横向]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  // 无模板打印\n  /**\n   * noReportPrint\n   * @param {ref} tableRef df-table的ref\n   * @param {array} data 表格数据\n   * @param {string} tableName 报表名\n   * @param {string} type 模式 print 打印 preview 打印预览\n   * @param {boolean} isLandscape 是否是横向\n  */\n  this.$utils.noReportPrint(tableRef, data, tableName, type, isLandscape)\n\n")])]),e("h3",{attrs:{id:"duo-mo-ban-da-yin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#duo-mo-ban-da-yin"}},[a._v("¶")]),a._v(" 多模板打印")]),e("p",[a._v("webapp_ws_ajax_together")]),e("p",[e("code",[a._v("{args}[打印参数]")])]),e("p",[e("code",[a._v("{reports}[打印数据]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  this.$utils.webapp_ws_ajax_together(args, reports)\n\n")])]),e("h2",{attrs:{id:"jin-gua-zai-utilsshang-de-fang-fa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jin-gua-zai-utilsshang-de-fang-fa"}},[a._v("¶")]),a._v(" 仅挂在utils上的方法")]),e("p",[a._v("使用时直接从引入的utils获取")]),e("p",[a._v("request 创建请求实例方法 参数：")]),e("p",[e("code",[a._v("{config}[初始化配置]")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  // config配置项\n  baseURL: String\t// 请求根路径\n  timeout: Number\t// 超时时间,默认10000\n  headers: Object\t// 请求头设置\n  requestPipe: Function\t// 请求config注入，参考axios的config可配置项\n  whiteList: Array\t// 请求白名单\n  authorization: String\t// 请求头token字段，默认'Authorization'\n  tokenKey: String\t// sessionStorage内存储token的字段，请求接口时会根据此字段获取token，默认 ：'token'\n  codeKey: String\t// 请求响应的code字段，配合successCode用于判断是否是成功的响应体\n  successCode: Number\t// 请求响应的code值，配合codeKey用于判断是否是成功的响应体\n  resDataKey: String\t// 请求响应的data字段\n  msgKey: String\t// 请求响应的message字段\n  showError: Boolean\t// 是否显示错误信息\n\n")])]),e("pre",[e("code",{staticClass:"language-javascript"},[a._v("\n  import request from '@df_scope/df-utils/request'\n\n  const instance = request({\n    baseURL: '/api',\n    timeout: 10000,\n    headers: {},\n    requestPipe (config) {\n      // 在这修改请求的config\n      return config\n    },\n    codeKey: 'returnCode',\n    successCode: 1,\n    resDataKey: 'returnData',\n    msgKey: 'returnMessage'\n  })\n\n  export default instance\n\n")])]),e("p",[a._v("cookies 操作cookies的方法对象 方法：")]),e("p",[e("code",[a._v("getsec(str)")]),a._v(":字符串转时间戳, 可转如 "),e("code",[a._v("'1000s', '2h', '1d'")]),a._v("的字符串,分别代表单位为:秒, 小时, 天")]),e("p",[e("code",[a._v("getCookie(key)")]),a._v(": 获取值")]),e("p",[e("code",[a._v("setCookie(key, value)")]),a._v(": 设置值")]),e("p",[e("code",[a._v("delCookie(key)")]),a._v(": 删除值")]),e("p",[a._v("下列方法获取方式同上, 使用方式与源库保持一致: axios、moment、lodash")])])}],r=t("2877"),i={},o=Object(r["a"])(i,n,s,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0b5f9a.ed481b0f.js.map